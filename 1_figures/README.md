1. Задача

Создать иерархию классов для геометрических фигур — прямоугольника (Rectangle) и квадрата (Square). Необходимо реализовать корректное наследование с учетом особенностей поведения каждой фигуры, чтобы избежать нарушения принципов объектно-ориентированного программирования (ООП), в частности принципа подстановки Барбары Лисков.
Основные требования:
Прямоугольник задается шириной (width) и высотой (height).
Квадрат — частный случай прямоугольника, у которого все стороны равны.
Расчет площади (area) должен быть доступен как свойство.
Следует учесть, что изменение одной стороны квадрата должно автоматически изменять другую сторону, чтобы сохранить его свойства.

2. Проблемы

Если создать класс Square как наследника Rectangle и при этом не учитывать, что у квадрата стороны равны, мы получаем нарушение принципа подстановки Барбары Лисков:
Пример нарушения:
Если в коде ожидается объект Rectangle (например, ширина 10, высота 20), а вместо него используется объект Square, то логика работы программы будет нарушена, поскольку у квадрата ширина и высота всегда равны.
Противоречие в наследовании:
Прямоугольник предполагает независимое изменение ширины и высоты, а квадрат — нет. Это приводит к конфликту, если квадрат наследуется от прямоугольника без специальных ограничений.

3. Принцип SOLID

Принципы SOLID обеспечивают правильное проектирование ООП-систем. В данной задаче акцент сделан на принципе подстановки Барбары Лисков (LSP):
Суть принципа LSP:
Объекты подклассов должны заменять объекты базового класса без нарушения логики программы.
Если класс Square нарушает логику работы Rectangle, то это нарушение принципа LSP.
Решение в контексте SOLID:
S (Single Responsibility): Класс Rectangle отвечает только за представление прямоугольника, а Square — за представление квадрата.
O (Open/Closed): Иерархия должна быть открыта для расширения (можно добавить новые фигуры) и закрыта для модификаций.
L (Liskov Substitution): Квадрат корректно подставляется вместо прямоугольника, так как его логика учитывает специфику равных сторон.
I (Interface Segregation): Общее поведение фигур выделено в базовый класс Shape.
D (Dependency Inversion): Высокоуровневые модули (работающие с фигурами) зависят от абстракций (Shape), а не от конкретных реализаций (Rectangle, Square).

4. Способ решения

Для устранения проблемы и соблюдения принципа подстановки Барбары Лисков были предприняты следующие шаги:
Введение базового класса Shape:
Определяет общий интерфейс для всех фигур (например, свойство area).
Это позволяет работать с различными фигурами единообразно.
Наследование Square от Rectangle:
В класс Square добавлены ограничения: изменение ширины (width) или высоты (height) автоматически обновляет обе стороны квадрата.
Добавлено свойство side для удобства работы с квадратом.
Свойства и сеттеры:
Используются свойства для контроля значений ширины, высоты и стороны. Это предотвращает некорректные изменения, нарушающие свойства фигуры.
Пример использования:
В программе можно создавать и использовать как прямоугольники, так и квадраты, не беспокоясь о логических противоречиях.